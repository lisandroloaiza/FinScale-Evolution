# Estrategia de Equipos - Team Topology

> **Objetivo**: Organizar equipos para maximizar autonom√≠a y velocity  
> **Principio**: Inverse Conway Maneuver (dise√±ar org para arquitectura deseada)

---

## üéØ Team Topologies (Matthew Skelton & Manuel Pais)

### Tipos de Equipos

```mermaid
graph TD
    subgraph StreamAligned["STREAM-ALIGNED TEAMS (Equipos de Producto)"]
        PaymentTeam[Payment Core Team<br/>Payment, FX, Clearing]
        LedgerTeam[Ledger & Compliance Team<br/>Ledger, Reconciliation]
        CustomerTeam[Customer Team<br/>Customer Service]
        FraudTeam[Fraud & Risk Team<br/>Fraud Service]
        IntegrationTeam[Integration Team<br/>Legacy Facade, HSM Proxy, CDC]
    end
    
    subgraph Enabling["ENABLING TEAMS (Facilitadores)"]
        ArchGuild[Architecture Guild<br/>Tech Leads + Architects]
        DevExTeam[Developer Experience Team<br/>Tooling]
    end
    
    subgraph Platform["PLATFORM TEAMS (Plataforma Interna)"]
        CloudTeam[Cloud Platform Team<br/>EKS, RDS, Kafka, Temporal.io]
        ObsTeam[Observability Team<br/>Prometheus, Grafana, Jaeger]
        DataTeam[Data Platform Team<br/>TimescaleDB, Cassandra, Redis]
    end
    
    subgraph Subsystem["COMPLICATED-SUBSYSTEM TEAMS (Especialistas)"]
        MLTeam[ML/AI Team<br/>TensorFlow Serving, Feature Store]
        SecTeam[Security Team<br/>Encryption, HSM, PCI-DSS]
        SearchTeam[Search Team<br/>Elasticsearch CQRS, Search/Query]
    end
    
    StreamAligned -->|Colaboraci√≥n| Enabling
    Enabling -->|Servicios| Platform
    Platform -->|X-as-a-Service| Subsystem
```

---

## üë• Stream-Aligned Teams (Equipos de Producto)

### Team 1: Payment Core Team

**Bounded Context**: Payment Execution Context (CORE)

**Misi√≥n**: Orquestaci√≥n de pagos globales con validaci√≥n, reserva de fondos y routing a 50+ redes bancarias

**Servicios Owned**:
- Payment Service (Spring WebFlux + R2DBC PostgreSQL)
- Saga Orchestrator (Temporal.io para transacciones distribuidas)

**Composici√≥n** (9 personas):
```yaml
Roles:
  - Tech Lead (1): Arquitectura reactiva + event sourcing
  - Backend Developers (5): Spring WebFlux, R2DBC, Kafka
  - Frontend Developer (1): React (admin panel)
  - QA Engineer (1): Testing + Chaos Engineering
  - Product Owner (1): Priorizaci√≥n de features
  
Skills requeridas:
  - Java 21, Spring Boot 3.2, WebFlux
  - Reactive Programming (Project Reactor)
  - Saga pattern (Temporal.io workflows)
  - Event Sourcing + CQRS
  - Financial domain (SWIFT, SEPA, PIX protocols)
  - PCI-DSS compliance (tokenizaci√≥n, HSM)
```

**OKRs (Q1 2025)**:
```yaml
Objective: Escalar a 1M TPS con latencia < 200ms
  KeyResults:
    - Latency p99: 1.2s ‚Üí 200ms
    - Throughput pico: 50K TPS ‚Üí 200K TPS (paso intermedio a 1M)
    - Payment success rate: 98% ‚Üí 99.5%
    - Zero PCI-DSS violations
```

**Interaction Modes** (Context Map 2.3):
- Con Ledger Team: **Partnership** (joint design de eventos PaymentExecuted)
- Con Fraud Team: **Customer-Supplier** (Payment consume scoring s√≠ncrono < 50ms)
- Con Treasury Team: **Customer-Supplier** (Payment consume FX quotes s√≠ncrono)
- Con Platform Team: **X-as-a-Service** (consume EKS, RDS, Kafka, Temporal.io)

---

### Team 2: Ledger & Compliance Team

**Bounded Contexts**: 
- General Ledger Context (CORE)
- Reconciliation Context (SUPPORTING)
- Regulatory Reporting Context (SUPPORTING)

**Misi√≥n**: Contabilidad de doble entrada inmutable + reconciliaci√≥n continua + reportes regulatorios

**Servicios Owned**:
- Ledger Service (Spring WebFlux + TimescaleDB Event Sourcing)
- Reconciliation Service (Spring Batch ‚Üí Streaming migration)
- Regulatory Reporting Service (Spring Batch con validaci√≥n pre-env√≠o)

**Composici√≥n** (9 personas):
```yaml
Roles:
  - Tech Lead (1): Event Sourcing + TimescaleDB expert
  - Backend Developers (4): WebFlux (Ledger), Spring Batch (Reconciliation/Reporting)
  - Compliance Analyst (1): Regulatory requirements (AML/KYC)
  - Data Engineer (1): TimescaleDB hypertables, compression policies
  - QA Engineer (1): Testing + auditor√≠a
  - Product Owner (1): Compliance roadmap

Skills:
  - Event Sourcing + CQRS pattern
  - TimescaleDB (continuous aggregates, compression)
  - Apache Kafka Streams
  - Financial regulations (AML, SAR reporting)
  - Accounting principles (double-entry ledger)
  - PCI-DSS (datos financieros sensibles)
```

**OKRs (Q1 2025)**:
```yaml
Objective: 100% auditor√≠a compliance con reconciliaci√≥n continua
  KeyResults:
    - Zero discrepancias en reconciliaci√≥n diaria
    - Eliminar batch window: 6h ‚Üí streaming continuo
    - Regulatory report submission: 100% on-time (0 retrasos)
    - Ledger write latency p99 < 50ms
```

**Interaction Modes** (Context Map 2.3):
- Con Payment Team: **Partnership** (eventos PaymentExecuted/PaymentFailed)
- Con Treasury Team: **Customer-Supplier** (Ledger consume extractos bancarios)
- Con Platform Team: **X-as-a-Service** (consume TimescaleDB, Kafka, S3)

---

### Team 3: Customer & Compliance Team

**Bounded Contexts**:
- Customer Management Context (SUPPORTING)
- Screening & Compliance Context (SUPPORTING)

**Misi√≥n**: Onboarding KYC + gesti√≥n de beneficiarios + screening de listas negras (OFAC/PEP)

**Servicios Owned**:
- Customer Service (Spring Boot + PostgreSQL: onboarding, KYC, beneficiarios)
- Screening Service (cache local de World-Check/ComplyAdvantage)

**Composici√≥n** (6 personas):
```yaml
Roles:
  - Tech Lead (1): GDPR + KYC expert
  - Backend Developers (2): Spring Boot, OAuth 2.0
  - Mobile Developer (1): React Native
  - Compliance Analyst (1): AML/KYC regulations
  - Product Owner (1)

Skills:
  - GDPR (crypto-shredding, right to erasure, consent management)
  - OAuth 2.0 / JWT (integraci√≥n con Auth0/Keycloak)
  - KYC integrations (Jumio, Onfido webhooks)
  - Sanctions screening (World-Check, ComplyAdvantage)
  - Mobile development (iOS/Android)
```

**OKRs (Q1 2025)**:
```yaml
Objective: Onboarding automatizado con compliance 100%
  KeyResults:
    - Reducir onboarding time: 2 d√≠as ‚Üí 4 horas (KYC automation)
    - Implementar biometric authentication (Face ID/Touch ID)
    - Screening latency < 2 segundos (cache World-Check)
    - Zero GDPR violation incidents
```

**Interaction Modes** (Context Map 2.3):
- Con Payment Team: **Upstream-Downstream** (Customer publica datos validados)
- Con Identity & Access (Auth0): **Conformist** (adaptarse a APIs de proveedor SaaS)
- Con External KYC Providers: **Anti-Corruption Layer** (wrapper sobre Jumio/Onfido)

---

### Team 5: Treasury & Clearing Team

**Bounded Contexts**:
- Treasury & FX Context (SUPPORTING)
- Clearing & Settlement Context (SUPPORTING)

**Misi√≥n**: Gesti√≥n de liquidez + cambio de divisas + comunicaci√≥n con redes bancarias externas (SWIFT/SEPA/PIX)

**Servicios Owned**:
- FX Service (Spring WebFlux + Cassandra: FX rates con TTL 5min)
- Clearing Service (Spring Boot: ISO 20022, gateways SWIFT/SEPA/PIX/SPEI)
- Notification Service (Spring WebFlux: push/email/SMS via Firebase/Twilio)

**Composici√≥n** (7 personas):
```yaml
Roles:
  - Tech Lead (1): FX trading + network protocols expert
  - Backend Developers (3): ISO 20022, SWIFT Alliance APIs
  - Network Engineer (1): TCP persistent connections, VPN
  - QA Engineer (1): End-to-end testing con redes sandbox
  - Product Owner (1): Roadmap de nuevas redes (PIX, SPEI)

Skills:
  - ISO 20022 (pacs.008, pacs.002, camt.053)
  - SWIFT Alliance APIs
  - FX trading concepts (spot rate, spread)
  - Network protocols (TCP, TLS)
```

**OKRs (Q1 2025)**:
```yaml
Objective: Expandir cobertura de redes de pago
  KeyResults:
    - Integrar PIX (Brasil) en 8 semanas
    - Integrar SPEI (M√©xico) en 6 semanas
    - FX rate staleness < 1 segundo (p99)
    - Clearing success rate > 99.5%
```

---

### Team 6: Integration Team

**Bounded Context**: N/A (Integration Layer transversal)

**Misi√≥n**: Migraci√≥n Strangler Fig del Legacy Monolito + integraci√≥n HSM + CDC bidireccional

**Servicios Owned**:
- Legacy Facade (Spring Boot: Anti-Corruption Layer para monolito Java 8 + Oracle)
- HSM Proxy (Netty: firma criptogr√°fica con Thales HSM on-premise)
- CDC Adapter (Debezium Kafka Connect: sincronizaci√≥n bidireccional)

**Composici√≥n** (7 personas):
```yaml
Roles:
  - Tech Lead (1): Legacy systems + Strangler Fig expert
  - Backend Developers (3): Oracle PL/SQL migration + Java Spring Boot
  - Infrastructure Engineer (1): Direct Connect AWS, VPN on-premise HSM
  - Security Engineer (1): HSM APIs (Thales, nCipher)
  - QA Engineer (1): Integration testing (Testcontainers, CDC validation)

Skills:
  - Oracle 11g (PL/SQL, triggers, stored procedures)
  - Debezium CDC (Kafka Connect source/sink connectors)
  - SOAP/XML legacy protocols
  - HSM APIs (PKCS#11, Thales payShield)
  - Anti-Corruption Layer pattern
```

**OKRs (Q1 2025)**:
```yaml
Objective: Migrar 70% del tr√°fico a microservicios (Strangler Fig Fase 2)
  KeyResults:
    - CDC lag p99 < 2 segundos
    - Legacy system downtime during migration: 0 segundos (zero-downtime)
    - Rollback capability < 5 minutos (feature flags + CDC rewind)
    - HSM signing latency p99 < 100ms
```

**Interaction Modes** (Context Map 2.3):
- Con Payment Team: **Customer-Supplier** (Payment depende de HSM Proxy para firmas)
- Con Ledger Team: **Customer-Supplier** (Ledger consume CDC events del monolito)
- Con Platform Team: **X-as-a-Service** (consume Debezium, Kafka Connect)
- Con Legacy Monolito: **Anti-Corruption Layer** (protege bounded contexts modernos)

---

### Team 4: Fraud & Risk Team

**Bounded Context**: Fraud Detection Context (CORE)

**Misi√≥n**: Motor ML de detecci√≥n de fraude con SLA < 100ms para scoring en tiempo real

**Servicios Owned**:
- Fraud Engine (Spring WebFlux + TensorFlow Serving + Cassandra)
- Analytics Service (CQRS Read Models para dashboards)

**Composici√≥n** (9 personas):
```yaml
Roles:
  - Tech Lead (1): Real-time ML architect
  - Backend Developers (2): Spring WebFlux, gRPC
  - ML Engineers (3): Feature pipelines, model serving (TensorFlow Serving)
  - Data Scientist (1): Model design, A/B testing
  - Fraud Analyst (1): Rule tuning, false positive analysis
  - Product Owner (1)

Skills:
  - Machine Learning (TensorFlow 2.x, scikit-learn)
  - Real-time ML serving (< 50ms SLA con GPU)
  - Feature Store (Feast + Redis)
  - Cassandra (escritura masiva de scoring events)
  - Fraud patterns (velocity, geolocation, account takeover)
  - GDPR (anonimizaci√≥n, derecho al olvido)
```

**OKRs (Q1 2025)**:
```yaml
Objective: Reducir false positives sin aumentar fraude
  KeyResults:
    - False positives: 8% ‚Üí 5%
    - Fraud detection rate: mantener > 95%
    - Model inference latency p99 < 50ms
    - Feature lookup latency (Redis) < 5ms
```

**Interaction Modes** (Context Map 2.3):
- Con Payment Team: **Upstream-Downstream** (Fraud publica risk scores s√≠ncrono)
- Con ML/AI Team: **Collaboration** (joint feature engineering)
- Con Ledger Team: **Customer-Supplier** (Fraud consulta historial transaccional)
- Con Platform Team: **X-as-a-Service** (consume Cassandra, Redis, GPU nodes)

---

## üß† Complicated-Subsystem Teams

### Team 6: ML/AI Team

**Misi√≥n**: Machine Learning models para Fraud Detection

**Responsabilidades**:
```yaml
Model Development:
  - Feature engineering (velocity, cross-border, unusual hours)
  - Model training (TensorFlow, XGBoost)
  - A/B testing (Modelo A vs Modelo B)
  - Explainability (SHAP values para auditor√≠a)

Model Serving:
  - TensorFlow Serving en GPU (NVIDIA T4)
  - Latency target: < 30ms p99
  - Throughput: 8K requests/s
  - Fallback rules cuando model unavailable

Feature Store:
  - Redis (hot features, < 5ms lookup)
  - PostgreSQL (feature history)
  - Feast integration
```

**Composici√≥n** (5 personas):
```yaml
Roles:
  - ML Lead (1): Model architecture
  - ML Engineers (2): Feature pipelines, serving infrastructure
  - Data Scientist (1): Model design, validation
  - MLOps Engineer (1): Model deployment, monitoring

Skills:
  - TensorFlow 2.x
  - Kubernetes GPU scheduling
  - Model monitoring (drift detection)
  - Python + Java (for gRPC clients)
```

**OKRs (Q1 2025)**:
```yaml
Objective: Reducir false positives rate
  KeyResults:
    - False positives de 8% ‚Üí 5% (sin aumentar false negatives)
    - Model inference latency p99 < 30ms
    - Zero model downtime (fallback rule activation < 100ms)
```

**Interaction Modes**:
- Con Fraud Team: **Collaboration** (joint feature design)
- Con Payment Team: **X-as-a-Service** (gRPC scoring API)
- Con Platform Team: **X-as-a-Service** (consume GPU nodes)

---

### Team 7: Security Team

**Misi√≥n**: Encryption, authentication, PCI-DSS compliance

**Responsabilidades**:
```yaml
Encryption:
  - AWS KMS key rotation
  - Field-level encryption (PII)
  - TLS certificate management
  - HSM operations (payment signing)

Authentication:
  - OAuth 2.0 server (Spring Authorization Server)
  - JWT validation
  - API key rotation
  - mTLS for service-to-service

Compliance:
  - PCI-DSS quarterly scans
  - Vulnerability assessments (Snyk, Trivy)
  - Security audits
  - Incident response
```

**Composici√≥n** (4 personas):
```yaml
Roles:
  - Security Lead (1): CISSP certified
  - Security Engineers (2): Penetration testing
  - Compliance Specialist (1): PCI-DSS, GDPR

Skills:
  - Cryptography (AES-256, RSA-2048)
  - OAuth 2.0 / OpenID Connect
  - AWS IAM, Security Groups
  - PCI-DSS requirements
```

**SLAs**:
```yaml
Services:
  - Security incident response: < 1 hora (24/7 on-call)
  - Vulnerability remediation: Critical < 24h, High < 7 days
  - Certificate renewal: 30 d√≠as antes de expiraci√≥n
```

---

### Team 8: Search Team

**Misi√≥n**: CQRS Read Models y consultas de alta performance

**Servicios Owned**:
- Search/Query Service (Elasticsearch)

**Responsabilidades**:
```yaml
Elasticsearch Management:
  - Index design (sharding, replicas)
  - Query optimization (< 100ms p99)
  - Aggregations para analytics
  - Eventual consistency monitoring

Sync Pipelines:
  - Kafka Connect Elasticsearch Sink
  - Lag monitoring (< 5 segundos target)
  - Schema evolution

Search APIs:
  - Payment search (by customer, date range, amount)
  - Transaction history (pagination, filters)
  - Compliance queries (audit trail)
```

**Composici√≥n** (4 personas):
```yaml
Roles:
  - Search Lead (1): Elasticsearch expert
  - Backend Developers (2): Java + Elasticsearch queries
  - Data Engineer (1): Kafka pipelines

Skills:
  - Elasticsearch 8.x
  - Lucene query syntax
  - CQRS pattern
  - Kafka Connect
```

**OKRs (Q1 2025)**:
```yaml
Objective: Mejorar query performance
  KeyResults:
    - Query latency p99 < 100ms (actualmente 250ms)
    - Sync lag < 5 segundos (actualmente 15s)
    - Zero data loss en sync pipeline
```

---

## üõ†Ô∏è Platform Teams

### Cloud Platform Team

**Misi√≥n**: Proveer plataforma cloud-native self-service (EKS, RDS, Kafka, Temporal.io)

**Stack Tecnol√≥gico Managed** (seg√∫n 3.4-Stack-Tecnologico.md):
```yaml
Compute:
  - Amazon EKS 1.28: Kubernetes cluster (3 AZ, 50-200 nodes auto-scaling)
  - EC2 Spot Instances: 70% costo vs On-Demand para workloads tolerantes
  
Databases:
  - Amazon RDS PostgreSQL 15: Databases transaccionales (Payment, Customer)
  - Amazon RDS Multi-AZ: 99.95% availability SLA
  
Messaging:
  - Amazon MSK (Managed Kafka) 3.5: Event streaming (10 brokers, RF=3)
  - Kafka Connect: Debezium CDC source/sink connectors
  
Orchestration:
  - Temporal.io Cloud: Saga orchestration (workflows durables)
  - Alternative: Self-hosted Temporal en EKS (considerar costo vs complejidad)
  
Networking:
  - AWS VPC: Subnets privadas (microservicios) + p√∫blicas (ALB)
  - AWS Direct Connect: 10 Gbps link a HSM on-premise
  - AWS Transit Gateway: VPN a legacy datacenter

Infrastructure as Code:
  - Terraform modules (EKS, RDS, MSK, Cassandra, Redis)
  - Helm charts reutilizables
  - CI/CD templates (GitHub Actions)

Developer Experience:
  - Service templates (cookiecutter)
  - Local development env (Docker Compose)
  - Documentation portal (Backstage)
```

**Composici√≥n** (8 personas):
```yaml
Roles:
  - Platform Lead (1)
  - SRE (4): Kubernetes, AWS, Temporal.io, networking
  - DevOps Engineer (2): CI/CD, automation
  - Security Engineer (1): IAM, encryption

On-call rotation: 24/7 (2 personas por semana)
```

**SLAs a Product Teams**:
```yaml
Services:
  - EKS cluster provision: < 1 hora
  - New service scaffold: < 15 min (cookiecutter)
  - CI/CD pipeline setup: < 30 min
  - Incident response: < 15 min (P0/P1)
  - RDS backup restore: < 2 horas
```

---

### Data Platform Team

**Misi√≥n**: Proveer almacenamiento especializado polyglot persistence

**Stack Tecnol√≥gico Managed** (seg√∫n 3.4-Stack-Tecnologico.md):
```yaml
TimescaleDB (Ledger Service):
  - Self-hosted en RDS PostgreSQL 15 + TimescaleDB extension
  - Hypertables: chunk_time_interval = 1 day
  - Compression policies: 10x after 30 days (automated)
  - Continuous aggregates: materializaci√≥n incremental
  - Backup/restore: PITR (Point-In-Time Recovery) con WAL archiving
  - Performance: 100K inserts/s (ledger entries)

Cassandra (FX Service + Fraud Service):
  - Self-hosted en EKS (StatefulSet)
  - 9-node cluster (3 per AZ, RF=3, CL=QUORUM)
  - FX rates con TTL 10 min (auto-expiration)
  - Fraud scoring events: escritura masiva 200K events/s
  - Compaction strategy: TimeWindowCompactionStrategy (TWCS)
  - Backup: Medusa (S3 snapshots diarios)

Redis Cluster (Caching + Feature Store):
  - Amazon ElastiCache Redis 7.0 (cluster mode enabled)
  - 6 shards √ó 2 replicas = 12 nodes
  - Eviction policy: allkeys-lru (LRU eviction)
  - Persistence: AOF (Append-Only File) every second
  - Use cases:
    * FX rate cache (5 min TTL)
    * Session store (JWT blacklist)
    * Feature Store (ML features para Fraud < 5ms)
    * Velocity counters (payment limits por beneficiario)
```

**Composici√≥n** (5 personas):
```yaml
Roles:
  - Data Platform Lead (1)
  - Cassandra DBA (1): Specialist
  - PostgreSQL DBA (1): RDS + TimescaleDB
  - Redis Engineer (1)
  - Data Engineer (1): ETL pipelines

Skills:
  - TimescaleDB hypertables
  - Cassandra CQL, nodetool
  - Redis data structures
```

**SLAs**:
```yaml
Services:
  - Database provision: < 2 horas
  - Query optimization: < 1 d√≠a turnaround
  - Backup restore: < 4 horas (RTO)
  - Data loss: < 5 min (RPO)
```

---

### Observability Team

**Misi√≥n**: Proveer visibilidad end-to-end de la plataforma (Golden Signals: Latency, Traffic, Errors, Saturation)

**Stack Tecnol√≥gico** (seg√∫n C2-Contenedores.md):
```yaml
Metrics (Prometheus + Grafana):
  - Prometheus: scraping de /actuator/prometheus endpoints (Spring Boot)
  - Grafana: dashboards RED (Rate, Errors, Duration)
  - SLO tracking: 99.9% availability, p99 latency < 200ms
  - Alerting: PagerDuty integration (P0/P1 incidents)
  - Custom exporters: Kafka lag exporter, Cassandra nodetool exporter
  - M√©tricas clave:
    * Payment throughput (req/s)
    * Ledger write latency (ms)
    * Fraud scoring latency (ms)
    * Kafka consumer lag (messages)

Tracing (Jaeger):
  - OpenTelemetry SDK: Java agent auto-instrumentation
  - Distributed tracing: trace_id propagado via HTTP headers + Kafka headers
  - Latency breakdown: identificar bottlenecks (DB queries, external APIs)
  - Dependency graphs: service topology din√°mico
  - Sampling: 100% for errors, 1% for successful requests (high volume)

Logging (ELK Stack):
  - Elasticsearch 8.x: √≠ndices por d√≠a (payments-2025.01.15)
  - Logstash: parsing de logs estructurados (JSON)
  - Kibana: dashboards de errores, auditor√≠a
  - Retention: 30 d√≠as hot, 90 d√≠as warm (S3), 7 a√±os cold (Glacier)
  - Queries comunes:
    * Error rate por servicio
    * Audit trail de cambios en ledger
    * PCI-DSS compliance logs (accesos a datos sensibles)
```

**Composici√≥n** (6 personas):
```yaml
Roles:
  - Observability Lead (1): SRE + monitoring expert
  - Platform Engineers (3): Prometheus, Jaeger, ELK
  - Data Engineer (1): Log ingestion pipelines
  - On-call Engineer (1): 24/7 incident response

Skills:
  - Prometheus (PromQL queries, alerting rules)
  - Grafana (dashboard design, templating)
  - OpenTelemetry (instrumentation, context propagation)
  - Elasticsearch (index management, query optimization)
  - PagerDuty (incident management)
```

**SLAs**:
```yaml
Services:
  - New service dashboard: < 1 hora
  - Alert rule creation: < 30 min
  - Incident investigation: < 15 min response
  - Metrics retention: 15 d√≠as (Prometheus), 1 a√±o (VictoriaMetrics long-term storage)
  - Log retention: 30 d√≠as hot, 90 d√≠as warm (S3), 7 a√±os cold (Glacier)
```
```

**Key Dashboards Provided**:
```yaml
Golden Signals Dashboard:
  - Request rate (per service)
  - Error rate (5xx responses)
  - Latency p50/p99 (per endpoint)
  - Saturation (CPU, memory, disk)

Business Metrics Dashboard:
  - Payment volume (TPS)
  - Revenue (daily/monthly)
  - Fraud detection rate
  - Customer onboarding funnel

SLO Dashboard:
  - Availability (per service tier)
  - Error budget remaining
  - Incident count
```

---

## üß† Enabling Teams

### Architecture Guild

**Misi√≥n**: Evolucionar arquitectura, compartir conocimiento

**Composici√≥n**:
- Tech Leads de cada Stream-Aligned Team (4)
- Enterprise Architect (1)
- Principal Engineer (1)

**Actividades**:
```yaml
Weekly Architecture Review:
  - Review de ADRs (Architecture Decision Records)
  - Evaluation de nuevas tecnolog√≠as
  - Cross-team design discussions

Monthly Tech Radar:
  - Assess: Tecnolog√≠as a evaluar (e.g., Quarkus)
  - Trial: En prueba (e.g., Apache Pulsar)
  - Adopt: Aprobadas (e.g., Spring Boot 3)
  - Hold: Deprecadas (e.g., Java 8)

Quarterly Architecture Kata:
  - Pr√°ctica de dise√±o de arquitectura
  - Mejora continua de skills
```

---

### Developer Experience Team

**Misi√≥n**: Reducir friction en desarrollo

**Composici√≥n** (3 personas):
```yaml
Roles:
  - DX Lead (1)
  - Frontend Tooling Engineer (1): Build optimization
  - Backend Tooling Engineer (1): Testing frameworks
```

**Iniciativas**:
```yaml
Tooling:
  - Local dev env en 5 min (Docker Compose)
  - Hot reload para Spring Boot (Spring DevTools)
  - API mocking (WireMock)

Documentation:
  - Backstage catalog (todos los servicios)
  - ADRs repository (architecture decisions)
  - Runbooks (incident response)

Metrics:
  - Build time: Target < 5 min
  - Test execution: Target < 3 min
  - Onboarding new dev: Target < 1 d√≠a productivo
```

---

## ÔøΩ Resumen: Equipos y Servicios

### Mapping Completo

| Team | Type | Services Owned | Headcount | Key Technologies |
|------|------|----------------|-----------|------------------|
| **Payment Core** | Stream-Aligned | Payment, FX, Clearing | 8 | Spring Boot, Kafka, SWIFT/SEPA/PIX |
| **Ledger & Compliance** | Stream-Aligned | Ledger, Reconciliation, Compliance | 7 | TimescaleDB, Kafka Streams, Flink |
| **Customer** | Stream-Aligned | Customer | 5 | Spring Boot, OAuth 2.0, React Native |
| **Fraud & Risk** | Stream-Aligned | Fraud, Analytics | 8 | TensorFlow (via ML Team), Prometheus |
| **Integration** | Stream-Aligned | Legacy Facade, HSM Proxy, CDC Adapter | 6 | Oracle PL/SQL, Debezium, SOAP |
| **ML/AI** | Complicated-Subsystem | (TensorFlow Serving, Feature Store) | 5 | TensorFlow, Kubernetes GPU, gRPC |
| **Security** | Complicated-Subsystem | (Auth, Encryption, Compliance) | 4 | AWS KMS, OAuth 2.0, PCI-DSS |
| **Search** | Complicated-Subsystem | Search/Query | 4 | Elasticsearch, Kafka Connect |
| **Cloud Platform** | Platform | (EKS, RDS, MSK, Temporal.io) | 7 | Terraform, Kubernetes, AWS |
| **Data Platform** | Platform | (TimescaleDB, Cassandra, Redis) | 5 | PostgreSQL, Cassandra, Redis |
| **Observability** | Platform | (Prometheus, Jaeger, ELK) | 4 | Prometheus, Grafana, Elasticsearch |
| **Architecture Guild** | Enabling | (ADR reviews, Tech Radar) | 6 part-time | Architecture patterns |
| **Developer Experience** | Enabling | (Tooling, Backstage) | 3 | Docker, Backstage, CI/CD |
| **TOTAL** | | **10 servicios + plataforma** | **62** | |

### Service Ownership Matrix

```mermaid
graph LR
    subgraph Services["Core Services"]
        Payment[Payment Service]
        FX[FX Service]
        Clearing[Clearing Service]
        Ledger[Ledger Service]
        Recon[Reconciliation Service]
        Customer[Customer Service]
        Fraud[Fraud Service]
        Facade[Legacy Facade]
        HSM[HSM Proxy]
        CDC[CDC Adapter]
        Search[Search/Query Service]
    end
    
    subgraph Teams["Owner Teams"]
        PaymentCore[Payment Core]
        LedgerComp[Ledger & Compliance]
        CustTeam[Customer]
        FraudTeam[Fraud & Risk]
        IntTeam[Integration]
        SearchTeam[Search Subsystem]
    end
    
    Payment --> PaymentCore
    FX --> PaymentCore
    Clearing --> PaymentCore
    Ledger --> LedgerComp
    Recon --> LedgerComp
    Customer --> CustTeam
    Fraud --> FraudTeam
    Facade --> IntTeam
    HSM --> IntTeam
    CDC --> IntTeam
    Search --> SearchTeam
    
    subgraph Shared["Shared Services (Platform)"]
        Temporal[Temporal.io<br/>Cloud Platform]
        TF[TensorFlow Serving<br/>ML/AI]
        Kafka[Kafka MSK<br/>Cloud Platform]
        TS[TimescaleDB<br/>Data Platform]
        Cass[Cassandra<br/>Data Platform]
        Redis[Redis<br/>Data Platform]
        ES[Elasticsearch<br/>Data Platform]
        Prom[Prometheus<br/>Observability]
        Jaeger[Jaeger<br/>Observability]
    end
```

---

## ÔøΩüîÑ Interaction Modes

### X-as-a-Service

```mermaid
graph LR
    PaymentTeam[Payment Team] -->|API calls| LedgerTeam[Ledger Team]
    PaymentTeam -->|API calls| PlatformTeam[Platform Team<br/>Kafka]
    
    style PaymentTeam fill:#e1f5ff
    style LedgerTeam fill:#fff4e1
    style PlatformTeam fill:#f0e1ff
```

**Caracter√≠sticas**:
- Contrato claro (OpenAPI spec)
- SLA definido (99.9% availability)
- Minimal communication overhead

---

### Collaboration

```mermaid
graph LR
    PaymentTeam[Payment Team] <-->|Joint design<br/>fraud scoring API| FraudTeam[Fraud Team]
    
    style PaymentTeam fill:#e1f5ff
    style FraudTeam fill:#ffe1e1
```

**Cu√°ndo usar**:
- Nuevos features que afectan m√∫ltiples teams
- Refactoring de interfaces compartidas
- Incident postmortems

---

### Facilitation

```mermaid
graph LR
    ArchGuild[Architecture Guild] -->|Workshops<br/>Training<br/>ADR reviews| StreamTeams[Stream-Aligned Teams]
    
    style ArchGuild fill:#e1ffe1
    style StreamTeams fill:#e1f5ff
```

**Ejemplos**:
- Workshop de Event Sourcing (2 d√≠as)
- Code review sessions
- Architecture katas mensuales

---

## üìä M√©tricas de Team Health

### DORA Metrics

```yaml
Deployment Frequency:
  Current: 10 deploys/d√≠a
  Target: 20 deploys/d√≠a
  
Lead Time for Changes:
  Current: 2 horas (commit ‚Üí production)
  Target: 1 hora
  
Mean Time to Recovery (MTTR):
  Current: 15 minutos
  Target: 10 minutos
  
Change Failure Rate:
  Current: 5%
  Target: < 3%
```

### Team Autonomy Score

```yaml
Assessment (escala 1-5):
  - Can deploy without approval: 5 (fully autonomous)
  - Can choose tech stack: 4 (within governance)
  - Can change DB schema: 5 (own databases)
  - Can provision infrastructure: 3 (via Platform Team)
  
Average: 4.25/5 (High autonomy)
```

---

## üéì Career Path

### Individual Contributor (IC) Track

```mermaid
graph TD
    L1[Junior Developer L1] --> L2[Mid-level Developer L2]
    L2 --> L3[Senior Developer L3]
    L3 --> L4[Staff Engineer L4]
    L4 --> L5[Principal Engineer L5]
    L5 --> L6[Distinguished Engineer L6]
    
    L4 -.->|choice| TL[Tech Lead L3-L4]
    TL --> EM[Engineering Manager L4-L5]
    EM --> Dir[Director of Engineering L6]
    
    style L1 fill:#e1f5ff
    style L2 fill:#e1f5ff
    style L3 fill:#fff4e1
    style L4 fill:#fff4e1
    style L5 fill:#ffe1e1
    style L6 fill:#ffe1e1
    style TL fill:#f0e1ff
    style EM fill:#f0e1ff
    style Dir fill:#f0e1ff
```

**Ejemplo - Staff Engineer (L4)**:
```yaml
Scope: Multiple services (Payment + FX + Clearing)
Responsibilities:
  - Architecture design para Payment domain
  - Mentorship de 3-5 developers
  - On-call rotation (1 week/month)
  - Technical debt management
  
Expected Impact:
  - Delivery: 1 major feature/quarter
  - Quality: Code review for critical changes
  - Knowledge sharing: 1 tech talk/month
```

---

## üöÄ Scaling Strategy

### Current (Year 1): 55 personas

```
Stream-Aligned Teams (6 teams):
  - Payment Core Team: 9 personas
  - Ledger & Compliance Team: 9 personas
  - Customer & Compliance Team: 6 personas
  - Fraud & Risk Team: 9 personas
  - Treasury & Clearing Team: 7 personas
  - Integration Team: 7 personas
  Subtotal: 47 personas

Platform Teams (3 teams):
  - Cloud Platform Team: 8 personas
  - Data Platform Team: 6 personas
  - Observability Team: 6 personas
  Subtotal: 20 personas

Complicated-Subsystem Teams (2 teams):
  - ML/AI Team: 5 personas
  - Security Team: 6 personas
  - Search Team: 4 personas (CQRS Read Models)
  Subtotal: 15 personas

Enabling Teams:
  - Architecture Guild: 4 personas (Tech Leads part-time)
  - Developer Experience Team: 3 personas
  Subtotal: 7 personas
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
Total = 89 personas
```

### Future (Year 3): 110 personas

**Growth Areas**:
- Split Payment Core ‚Üí Payment Execution (6) + FX Trading (6)
- Split Ledger & Compliance ‚Üí Ledger (6) + Compliance & Reporting (6)
- New: Analytics & BI Team (8 personas)
- Grow Platform teams: Cloud (10), Data (8), Observability (8)

**Scaling Principles**:
- Max team size: 9 personas (2-pizza teams)
- Cognitive load: 1 team = 1-3 bounded contexts
- Split teams when owning > 3 services or team size > 9

---

**Conclusi√≥n**: Organizaci√≥n alineada 1:1 con bounded contexts del dise√±o estrat√©gico y arquitectura de microservicios, maximizando autonom√≠a y velocity. Cada Stream-Aligned Team mapea directamente a uno o m√°s bounded contexts relacionados, con Interaction Modes definidos seg√∫n Context Map de la Fase 2.

---

**√öltima actualizaci√≥n**: 30 de diciembre de 2025
