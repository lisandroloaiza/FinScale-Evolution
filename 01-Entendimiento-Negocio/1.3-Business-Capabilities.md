# 1.3 Business Capabilities (Capacidades de Negocio)

> **Objetivo**: Identificar las capacidades de negocio de FinScale y clasificarlas seg√∫n su nivel de madurez y necesidad de transformaci√≥n.  
> **Framework**: TOGAF Business Capability Mapping  
> **Metodolog√≠a**: WhyDD

---

## üß© ¬øQu√© es una Business Capability?

Una **Capacidad de Negocio** es lo que la organizaci√≥n **debe ser capaz de hacer** para ejecutar su estrategia, independiente de c√≥mo lo hace (procesos, tecnolog√≠a, personas).

**Caracter√≠sticas:**
- **Estable en el tiempo**: Las capacidades cambian poco (ej. "Procesar Pagos" existe hace 15 a√±os)
- **Independiente de estructura organizacional**: No se llama "Equipo de Juan hace X", sino "La empresa es capaz de X"
- **Medible**: Tiene KPIs de rendimiento

---

## üèõÔ∏è Modelo de Capacidades de FinScale

### Estructura Jer√°rquica

```
FINSCALE - BUSINESS CAPABILITIES
‚îÇ
‚îú‚îÄ‚îÄ 1. CUSTOMER EXPERIENCE & GROWTH
‚îÇ   ‚îú‚îÄ‚îÄ 1.1 Customer Acquisition (Onboarding)
‚îÇ   ‚îú‚îÄ‚îÄ 1.2 Identity Verification (KYC/AML)
‚îÇ   ‚îú‚îÄ‚îÄ 1.3 Account Management (Wallet Overview)
‚îÇ   ‚îî‚îÄ‚îÄ 1.4 Beneficiary Management (Party Data)
‚îÇ
‚îú‚îÄ‚îÄ 2. PAYMENT PROCESSING & EXECUTION
‚îÇ   ‚îú‚îÄ‚îÄ 2.1 Payment Order Management (Payment Execution)
‚îÇ   ‚îú‚îÄ‚îÄ 2.2 Payment Routing & Orchestration
‚îÇ   ‚îú‚îÄ‚îÄ 2.3 Foreign Exchange (FX Trading)
‚îÇ   ‚îî‚îÄ‚îÄ 2.4 Clearing & Settlement
‚îÇ
‚îú‚îÄ‚îÄ 3. RISK & COMPLIANCE
‚îÇ   ‚îú‚îÄ‚îÄ 3.1 Fraud Detection & Prevention
‚îÇ   ‚îú‚îÄ‚îÄ 3.2 Sanctions Screening (AML/CTF)
‚îÇ   ‚îî‚îÄ‚îÄ 3.3 Regulatory Reporting
‚îÇ
‚îî‚îÄ‚îÄ 4. FINANCIAL ACCOUNTING & RECONCILIATION
    ‚îú‚îÄ‚îÄ 4.1 General Ledger (Position Keeping)
    ‚îî‚îÄ‚îÄ 4.2 Transaction Reconciliation
```

---


## 1Ô∏è‚É£ Customer Experience & Growth

### 1.1 Customer Acquisition (Onboarding)

| Aspecto | Estado Actual | Objetivo | Prioridad |
|---------|---------------|----------|-----------|
| **Descripci√≥n Actual** | Registro con captura de biometr√≠a y documentos legales. Integraci√≥n con proveedores KYC (Jumio, Onfido) responde en minutos v√≠a webhooks. | Onboarding automatizado con decisi√≥n en tiempo real. | üü° ALTA |
| **Tecnolog√≠a Actual** | Formularios web + integraci√≥n as√≠ncrona con proveedores KYC v√≠a webhooks. | Orquestaci√≥n autom√°tica con Anti-Corruption Layer para m√∫ltiples proveedores. | - |
| **Estrategia** | **OPTIMIZE** (mejorar orquestaci√≥n) | - | - |

**Drivers Afectados**: Time-to-Market, Escalabilidad

---

### 1.2 Identity Verification (KYC/AML)

| Aspecto | Estado Actual | Objetivo | Prioridad |
|---------|---------------|----------|-----------|
| **Descripci√≥n Actual** | Integraci√≥n con m√∫ltiples proveedores KYC (Jumio, Onfido, World-Check) v√≠a webhooks as√≠ncronos. Responden minutos despu√©s con veredicto. | Orquestaci√≥n autom√°tica con fallback entre proveedores. | üî¥ CR√çTICA |
| **Tecnolog√≠a Actual** | Integraciones con webhooks as√≠ncronos. L√≥gica en Monolito. | Anti-Corruption Layer + Event-Driven con estado persistente de verificaci√≥n. | - |
| **Estrategia** | **TRANSFORM** (redise√±ar con orquestaci√≥n) | - | - |

**Drivers Afectados**: Cumplimiento, Resiliencia, Time-to-Market

---

### 1.3 Account Management (Wallet Overview)

| Aspecto | Estado Actual | Objetivo | Prioridad |
|---------|---------------|----------|--------|
| **Descripci√≥n Actual** | Visualizaci√≥n de saldos consolidados en m√∫ltiples divisas y movimientos hist√≥ricos. Consulta de ID de Cliente, Saldos por divisa, Lista de transacciones (metadata simple), Estado de cuenta. | Visualizaci√≥n en tiempo real con anal√≠tica predictiva. | üü¢ MEDIA |
| **Tecnolog√≠a Actual** | Consultas a Monolito desde App M√≥vil y Web. | CQRS con Read Models optimizados. | - |
| **Estrategia** | **OPTIMIZE** (queries optimizadas) | - | - |

**Drivers Afectados**: Escalabilidad, Disponibilidad

---

### 1.4 Beneficiary Management (Party Data)

| Aspecto | Estado Actual | Objetivo | Prioridad |
|---------|---------------|----------|--------|
| **Descripci√≥n Actual** | Alta y baja de terceros frecuentes para transferencias. Gesti√≥n de Alias, IBAN/SWIFT, Nombre del banco destino, Tipo de relaci√≥n. | Gesti√≥n simplificada con validaci√≥n en tiempo real de cuentas destino. | üü¢ MEDIA |
| **Tecnolog√≠a Actual** | Almacenamiento en BD Oracle desde Monolito. | Servicio independiente con validaci√≥n as√≠ncrona de IBAN/SWIFT. | - |
| **Estrategia** | **MODERNIZE** (servicio independiente) | - | - |

**Drivers Afectados**: Time-to-Market

---

## 2Ô∏è‚É£ Payment Processing & Execution

### 2.1 Payment Order Management

| Aspecto | Estado Actual | Objetivo | Prioridad |
|---------|---------------|----------|-----------|
| **Descripci√≥n Actual** | Gesti√≥n de pagos en Monolito. Throughput: 2,000 TPS. Latencia P99: 1,200ms. Estados de pago en BD relacional con bloqueos. | Sistema reactivo con Event Sourcing. Throughput: 1M TPS. Latencia P99: 200ms. | üî¥ CR√çTICA |
| **Tecnolog√≠a Actual** | Java 8 bloqueante + Oracle con stored procedures. | Spring WebFlux + Event Store (Kafka/EventStoreDB) + CQRS. | - |
| **KPI Actual** | Throughput: 2k TPS, Latency P99: 1.2s, Availability: 99.5% | Throughput: 1M TPS, Latency: 200ms, Availability: 99.999% | - |
| **Estrategia** | **REBUILD** (reescribir con arquitectura reactiva) | - | - |

**Drivers Afectados**: Escalabilidad, Disponibilidad, Resiliencia

---

### 2.2 Payment Routing & Orchestration

| Aspecto | Estado Actual | Objetivo | Prioridad |
|---------|---------------|----------|-----------|
| **Descripci√≥n Actual** | Orquestaci√≥n del pago: validaci√≥n de saldo, reserva de fondos y enrutamiento a red de salida adecuada. L√≥gica en Monolito. No hay fallback si una red cae. | Routing din√°mico con fallback autom√°tico entre redes bancarias. | üî¥ CR√çTICA |
| **Tecnolog√≠a Actual** | L√≥gica en Monolito. | Servicio de orquestaci√≥n con Circuit Breaker. | - |
| **Estrategia** | **TRANSFORM** (externalizar reglas + orquestaci√≥n) | - | - |

**Drivers Afectados**: Resiliencia, Time-to-Market

---

### 2.3 Foreign Exchange (FX Trading)

| Aspecto | Estado Actual | Objetivo | Prioridad |
|---------|---------------|----------|-----------|
| **Descripci√≥n Actual** | Cotizaci√≥n y ejecuci√≥n de cambio de divisas en tiempo real para pagos transfronterizos. Sistema cotiza tasa de cambio y la bloquea por per√≠odo definido. | Tasas en tiempo real con bloqueo autom√°tico. | üü° ALTA |
| **Tecnolog√≠a Actual** | Cotizaci√≥n desde Monolito con almacenamiento temporal de tasa. | Event-Driven pricing con streaming. | - |
| **Estrategia** | **OPTIMIZE** (mejorar latencia y automatizaci√≥n) | - | - |

**Drivers Afectados**: Escalabilidad, Disponibilidad

---

### 2.4 Clearing & Settlement

| Aspecto | Estado Actual | Objetivo | Prioridad |
|---------|---------------|----------|-----------|
| **Descripci√≥n Actual** | Comunicaci√≥n con redes bancarias (SWIFT, SEPA) v√≠a conexiones TCP stateful. No hay visibilidad de estado intermedio. | Integraci√≥n h√≠brida: Legacy (SWIFT) + Moderno (APIs Open Banking). Visibilidad completa de estados. | üü° ALTA |
| **Tecnolog√≠a Actual** | Sockets TCP + ISO 8583 / ISO 20022. Procesamiento s√≠ncrono. | Adaptadores con patr√≥n Bridge + Event Streaming para estados. | - |
| **Estrategia** | **MODERNIZE** (wrapper reactivo sobre legacy) | - | - |

**Drivers Afectados**: Disponibilidad, Resiliencia

---


## 3Ô∏è‚É£ Risk & Compliance

### 3.1 Fraud Detection & Prevention

| Aspecto | Estado Actual | Objetivo | Prioridad |
|---------|---------------|----------|-----------|
| **Descripci√≥n Actual** | An√°lisis en tiempo real de cada transacci√≥n (SLA < 100ms). Reglas de fraude en stored procedures PL/SQL (40% de l√≥gica de negocio). Analiza: velocidad transaccional, geolocalizaci√≥n, scoring. | ML en tiempo real con an√°lisis de patrones an√≥malos y account takeover. | üî¥ CR√çTICA |
| **Tecnolog√≠a Actual** | Stored Procedures Oracle con reglas de riesgo. Monolito invoca PL/SQL para an√°lisis. | Servicio independiente con streaming analytics y ML. | - |
| **KPI Actual** | SLA: < 100ms | SLA mantenido con mayor precisi√≥n | - |
| **Estrategia** | **REBUILD** (migrar l√≥gica PL/SQL a servicio con ML) | - | - |

**Drivers Afectados**: Escalabilidad, Resiliencia, Modernizaci√≥n

---

### 3.2 Sanctions Screening (AML/CTF)

| Aspecto | Estado Actual | Objetivo | Prioridad |
|---------|---------------|----------|-----------|
| **Descripci√≥n Actual** | Verificaci√≥n de que ordenante y beneficiario no est√©n en listas negras (OFAC, Interpol). Integraci√≥n con proveedor (World-Check). | Screening as√≠ncrono con cache local de listas. | üî¥ CR√çTICA |
| **Estrategia** | **OPTIMIZE** (caching + async) | - | - |

**Drivers Afectados**: Cumplimiento, Resiliencia

---

### 3.3 Regulatory Reporting

| Aspecto | Estado Actual | Objetivo | Prioridad |
|---------|---------------|----------|-----------|
| **Descripci√≥n Actual** | Generaci√≥n de reportes para bancos centrales y entidades fiscales. Logs de transacciones enriquecidos con trazabilidad de fondos. | Reportes automatizados con generaci√≥n r√°pida. Validaci√≥n autom√°tica. | üü° ALTA |
| **Estrategia** | **TRANSFORM** (automatizaci√≥n) | - | - |

**Drivers Afectados**: Cumplimiento, Modernizaci√≥n

---

## 4Ô∏è‚É£ Financial Accounting & Reconciliation

### 4.1 General Ledger (Position Keeping)

| Aspecto | Estado Actual | Objetivo | Prioridad |
|---------|---------------|----------|-----------|
| **Descripci√≥n Actual** | Ledger en Oracle con 40% de l√≥gica en stored procedures PL/SQL. Registro inmutable de doble entrada de cada movimiento. Bloqueos de escritura frecuentes. | Event Sourcing + CQRS. Ledger inmutable en Event Store. Consistencia eventual para vistas. | üî¥ CR√çTICA |
| **Tecnolog√≠a Actual** | Oracle con 40% l√≥gica en PL/SQL. | Event Store + servicios Java reactivos. | - |
| **Estrategia** | **REBUILD** (Event Sourcing + migrar PL/SQL) | - | - |

**Drivers Afectados**: Escalabilidad, Disponibilidad, Cumplimiento

---

### 4.2 Transaction Reconciliation

| Aspecto | Estado Actual | Objetivo | Prioridad |
|---------|---------------|----------|-----------|
| **Descripci√≥n Actual** | Proceso batch nocturno (00:00-06:00 UTC) cruza movimientos bancarios contra Ledger interno. Bloquea base de datos durante 6 horas. Desviaciones generan alertas cr√≠ticas para intervenci√≥n manual. | Reconciliaci√≥n continua (streaming). Zero-downtime. Automatizaci√≥n de matching. | üî¥ CR√çTICA |
| **Tecnolog√≠a Actual** | Descarga extractos de bancos aliados + proceso batch que cruza registros. | Streaming reconciliation + automatizaci√≥n de excepciones. | - |
| **KPI Actual** | Ventana: 6 horas, BD bloqueada | Ventana: 0 (continuo), sin bloqueos | - |
| **Estrategia** | **REBUILD** (streaming reconciliation) | - | - |

**Drivers Afectados**: Disponibilidad, Modernizaci√≥n, Time-to-Market

---

## üìà Heat Map: Capacidades a Transformar

| Capacidad | Impacto Negocio | Complejidad T√©cnica | Prioridad | Estrategia |
|-----------|-----------------|---------------------|-----------|------------|
| **Payment Order Mgmt** | üî¥ Muy Alto | üî¥ Muy Alta | P0 | REBUILD |
| **Fraud Detection** | üî¥ Muy Alto | üü° Alta | P0 | REBUILD |
| **Reconciliation** | üî¥ Muy Alto | üü° Alta | P0 | REBUILD |
| **General Ledger** | üî¥ Muy Alto | üî¥ Muy Alta | P0 | REBUILD |
| **Payment Routing** | üü° Alto | üü° Alta | P1 | TRANSFORM |
| **KYC/AML** | üü° Alto | üü† Media | P1 | TRANSFORM |
| **Clearing & Settlement** | üü° Alto | üü° Alta | P1 | MODERNIZE |
| **FX Trading** | üü† Medio | üü† Media | P2 | OPTIMIZE |
| **Sanctions Screening** | üî¥ Muy Alto | üü† Media | P1 | OPTIMIZE |

---

## üéØ Estrategias de Transformaci√≥n Definidas

### REBUILD (Reescribir desde cero)
- **Cu√°ndo**: Capacidad cr√≠tica con deuda t√©cnica insostenible (40% l√≥gica en PL/SQL, bloqueos BD)
- **Capacidades**: Payment Order, Fraud Detection, Ledger, Reconciliation
- **Enfoque**: Strangler Fig Pattern - nueva implementaci√≥n coexiste con legacy

### TRANSFORM (Redise√±ar con nuevas tecnolog√≠as)
- **Cu√°ndo**: Capacidad existente pero con enfoque arquitect√≥nico obsoleto
- **Capacidades**: Payment Routing, KYC/AML
- **Enfoque**: Extraer l√≥gica + modernizar stack

### MODERNIZE (Actualizar stack manteniendo l√≥gica)
- **Cu√°ndo**: L√≥gica correcta pero tecnolog√≠a legacy (sockets TCP, protocolos stateful)
- **Capacidades**: Clearing & Settlement
- **Enfoque**: Wrapper/Adapter pattern para ISO 8583, SWIFT

### OPTIMIZE (Mejorar rendimiento/UX)
- **Cu√°ndo**: Capacidad funcional pero con margen de mejora
- **Capacidades**: FX Trading, Sanctions Screening, Account Management, Beneficiary Management
- **Enfoque**: Refactoring incremental

---

## ‚úÖ Conclusiones

1. **4 capacidades requieren REBUILD (31%)**: Payment Order, Ledger, Fraud Detection, Reconciliation - todas con 40% l√≥gica en PL/SQL y bloqueos BD cr√≠ticos
2. **13 Business Capabilities totales** derivadas de los 4 equipos de la Kata (Growth, Operations, Trust & Safety, System of Record)
3. **Deuda t√©cnica concentrada en**: Oracle con 40% PL/SQL + Monolito Java 8 J2EE + Secuencias globales + Sticky Sessions
4. **Restricciones cr√≠ticas**: ISO 8583 sobre TCP (stateful), God Class TransactionManager.java (15K l√≠neas), Shared Database (CORE_SCHEMA)

---

**√öltima actualizaci√≥n**: 7 de diciembre de 2025
